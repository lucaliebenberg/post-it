<!DOCTYPE html>
{% load widget_tweaks %}
{% load permission_filter %}
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      src="https://code.jquery.com/jquery-3.1.1.min.js"
      integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
      crossorigin="anonymous"></script>
    <script src="semantic/dist/semantic.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Post It | Post Detail</title>
  </head>
  <body>

    <div class='w-[100%] min-height-[100vh] flex flex-col justify-center m-auto text-center overflow-x-hidden'>
        <!-- Navigation [start] -->
      <div class="breadcrumbs text-sm p-10">
        <ul>
          <li class=''>
            <a href="{% url 'index' %}">
              <!-- <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                class="h-4 w-4 stroke-current mr-1">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path>
              </svg> -->
              <span class='mr-2'>
                Â«
              </span>
              dashboard
            </a>
          </li>
        </ul>
      </div>
      <!-- Navigation [end] -->

      <form method='post' class='overflow-hidden'>
        {% csrf_token %}

            <!-- New  -->
        <div class="card bg-base-100 w-[100%] shadow-xl overflow-x-hidden">
          {% for error in field.errors %}
            <span class='help-block'>{{ error }}</span>
          {% endfor %}
          <figure class="px-10 pt-10">
            <img
              src="https://img.daisyui.com/images/stock/photo-1606107557195-0e29a4b5b4aa.webp"
              alt="{{ post.creator }}"
              class="rounded-xl" />
          </figure>
          <div class="card-body items-start text-left">
            <h2 class="card-title">{{ post.creator }}</h2>
            <p>{{ post.title }}</p>
            <p>{{ post.description }}</p>
            <div class="badge badge-primary">{{ post.created_at }}</div>
            <div>
              {% if references %}

                {% for r in references %}
                  {% if user|check_reference_jobpost_creator:post %}
                    <div class='flex flex-row justify-between align-middle gap-4'>
                      <p class='text-sm text-black'><strong>Reference:</strong></p>
                      <p class='text-sm text-black'>{{ r.name }}</p>
                      <p class='text-sm text-black'>{{ r.number }}</p>
                    </div>
                  {% else %}
                    <p class='text-sm text-black'>No references have been added</p>
                  {% endif %}
                {% endfor %}
              {% endif %}

              {% if references == 0 %}
                <p class='text-sm text-black'>No references have been added</p>
              {% endif %}

            </div>
            <div class="card-actions w-full">
              <button class="btn btn-primary w-full">Contact Now</button>
            </div>
            {% if user|is_post_author:post %}
              <button class="btn btn-error w-full">
                <a href="{% url 'jobposts:delete_jobpost' pk=post.pk %}" class='w-full'>Delete</a>
              </button>
            {% endif %}
          </div>
        </div>
            <!--  -->
        <div>
          <!-- {% if user|is_post_author:post %}
            <a href="{% url 'jobposts:delete_jobpost' pk=post.pk %}" style='background-color: red; color: black; padding: 4px; border-radius: 4px; color: white; text-decoration: none;'>Delete</a>
          {% endif %} -->
        </div>
      </form>
    </div>
  </body>
</html>